<ng-container *ngIf="frameworkForm">
  <div class="mb-3 " [formGroup]="frameworkForm">
    <label class="form-label">{{ field.displayName }}</label>

    <!-- Chip grid -->
    <mat-chip-grid #chipGrid aria-label="Chip selection" class="form-control p-2">
      <mat-chip-row *ngFor="let value of selectedValues" (removed)="remove(value)">
        {{ value[field.lookupField1?field.lookupField1:''] }}
        <button matChipRemove [attr.aria-label]="'remove ' + value[field.lookupField1?field.lookupField1:'']">
          <mat-icon>cancel</mat-icon>
        </button>
      </mat-chip-row>

      <!-- Input box styled like Bootstrap -->
      <input
        type="text"
        class="form-control border-0 shadow-none p-0"
        placeholder=""
        #chipInput
        [formControlName]="field.formControlName"
        [matChipInputFor]="chipGrid"
        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
        [matAutocomplete]="auto"
        [(ngModel)]="currentInput"
        (matChipInputTokenEnd)="add($event)"
        />
    </mat-chip-grid>

    <!-- Autocomplete dropdown -->
    <mat-autocomplete
      #auto="matAutocomplete"
      [displayWith]="displayFn"
      (optionSelected)="selected($event)">
      <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
        {{ option[field.lookupField1?field.lookupField1:''] }}
      </mat-option>
    </mat-autocomplete>
  </div>
</ng-container>
